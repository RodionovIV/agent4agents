# Системные требования к задаче: Автоматизация обработки заявок в OpenShift

## 1. Знакомство с бизнес-контекстом и бизнес-требованиями, их уточнение

### Бизнес-контекст
В настоящее время обработка заявок в OpenShift осуществляется вручную, что приводит к увеличению времени на обработку инцидентов и снижению качества обслуживания клиентов. Автоматизация данного процесса позволит сократить время на обработку заявок, повысить точность и качество заполнения заявок, а также снизить нагрузку на сотрудников.

### Бизнес-требования
- Сокращение времени на обработку заявок в OpenShift.
- Повышение точности и качества заполнения заявок.
- Снижение нагрузки на сотрудников.
- Повышение удовлетворенности клиентов.

## 2. Определение ролей пользователей и приложений. Верхнеуровневое проектирование архитектуры

### Роли пользователей
- **Сотрудник службы поддержки**: отправляет заявку в OpenShift.
- **Администратор системы**: получает уведомления о проблемах.
- **Пользователь системы OpenShift**: получает обработанную заявку.

### Приложения и сервисы
- **Агент-анализатор**: анализирует заявку.
- **Агент-сравниватель**: ищет аналогичные примеры.
- **Агент-заполнитель**: заполняет заявку.
- **Агент-валидатор**: проверяет корректность заполнения.
- **Агент-оркестратор**: координирует работу агентов.
- **OpenShift**: отправляет и получает заявки.
- **База данных "ПКАП"**: хранит данные о заявках.

### Архитектура
Система состоит из пяти агентов, взаимодействующих с OpenShift и базой данных "ПКАП". Агенты обмениваются данными в формате JSON, передача данных защищена с использованием SSL/TLS. Все взаимодействия между агентами логируются для последующего анализа и отладки.

## 3. Выделение и описание основных сценариев работы с системой

### Основные сценарии
1. **Анализ заявки**:
   - **Актор**: Агент-анализатор
   - **Действие**: Анализирует заявку
   - **Объект**: Заявка из OpenShift
   - **Результат**: Выделены причины инцидента и способ его закрытия

2. **Поиск аналогичных примеров**:
   - **Актор**: Агент-сравниватель
   - **Действие**: Ищет аналогичные примеры
   - **Объект**: Анализ заявки и база данных "ПКАП"
   - **Результат**: Найдены аналогичные примеры или сообщение об отсутствии аналога

3. **Заполнение заявки**:
   - **Актор**: Агент-заполнитель
   - **Действие**: Заполняет заявку
   - **Объект**: Анализ заявки и найденные примеры
   - **Результат**: Заполненная заявка

4. **Проверка корректности заполнения**:
   - **Актор**: Агент-валидатор
   - **Действие**: Проверяет корректность заполнения
   - **Объект**: Заполненная заявка
   - **Результат**: Заявка отправлена обратно в OpenShift или возвращена на доработку

5. **Координация работы агентов**:
   - **Актор**: Агент-оркестратор
   - **Действие**: Координирует работу агентов
   - **Объект**: Все агенты системы
   - **Результат**: Контроль процесса, обработка ошибок и альтернативных сценариев

## 4. Проработка альтернативных сценариев

### Альтернативные сценарии
1. **Если не найдено аналогичного примера**:
   - **Актор**: Агент-заполнитель
   - **Действие**: Заполняет заявку на основе только анализа
   - **Объект**: Анализ заявки
   - **Результат**: Заполненная заявка отправляется на проверку

2. **Если данные из OpenShift некорректны**:
   - **Актор**: Агент-анализатор
   - **Действие**: Сообщает агенту-оркестратору
   - **Объект**: Некорректные данные
   - **Результат**: Запрос на повторную передачу данных из OpenShift

3. **Если база данных недоступна**:
   - **Актор**: Агент-сравниватель
   - **Действие**: Не может найти аналогичную заявку
   - **Объект**: База данных "ПКАП"
   - **Результат**: Агент-заполнитель заполняет заявку на основе только анализа

4. **Если заполненная заявка некорректна**:
   - **Актор**: Агент-валидатор
   - **Действие**: Возвращает задачу агенту-заполнителю на доработку
   - **Объект**: Некорректно заполненная заявка
   - **Результат**: Процесс повторяется до корректного заполнения

## 5. Требования к безопасности

### Авторизация/аутентификация
- Использование SSL/TLS для защиты передачи данных.
- Логирование всех взаимодействий между агентами.

### Защита данных
- Шифрование данных при передаче.
- Ограничение доступа к базе данных "ПКАП" только в рабочее время.

## 6. Описание нефункциональных требований

### Производительность
- Время обработки заявки не должно превышать 1 минуты.
- Система должна выдерживать нагрузку до 100 одновременных заявок.

### Масштабируемость
- Возможность горизонтального масштабирования агентов.
- Возможность увеличения объема базы данных "ПКАП".

## 7. Определение ключевых данных: сущности и их свойства

### Ключевые сущности
- **Заявка**: ID, описание инцидента, причина инцидента, способ закрытия, статус.
- **Пример**: ID, описание инцидента, причина инцидента, способ закрытия.

## 8. Задачи на доработку Базы Данных

- Создание новой таблицы для хранения заявок.
- Добавление полей в существующую таблицу для хранения примеров.
- Миграция данных из старой системы в новую.

## 9. Задачи на разработку методов Backend (методов API)

### Методы API
- **GET /api/analyze**: анализирует заявку.
- **GET /api/compare**: ищет аналогичные примеры.
- **POST /api/fill**: заполняет заявку.
- **POST /api/validate**: проверяет корректность заполнения.
- **POST /api/orchestrate**: координирует работу агентов.

## 10. Задачи на фронтенд / мобильные устройства

- Создание интерфейса для отправки заявок в OpenShift.
- Отображение статуса обработки заявки.
- Уведомления о завершении обработки заявки.

## 11. Тестирование функционала

### Тестирование
- Модульное тестирование каждого агента.
- Интеграционное тестирование взаимодействия агентов.
- Нагрузочное тестирование системы.

### Процесс тестирования
1. **Модульное тестирование**: проверка работы каждого агента.
2. **Интеграционное тестирование**: проверка взаимодействия агентов.
3. **Нагрузочное тестирование**: проверка производительности системы при нагрузке.