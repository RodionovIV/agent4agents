# Системные требования к задаче: Автоматизация обработки заявок в OpenShift

## 1. Знакомство с бизнес-контекстом и бизнес-требованиями, их уточнение

Проект направлен на автоматизацию обработки заявок в системе OpenShift с целью повышения эффективности работы сотрудников и сокращения времени на обработку инцидентов. В рамках проекта будет разработана система, состоящая из пяти агентов, каждый из которых выполняет свою задачу: анализ заявки, поиск аналогичных примеров, заполнение заявки, проверка корректности и координация работы всех агентов. Система будет взаимодействовать с OpenShift и базой данных "ПКАП" через RAG и API.

## 2. Определение ролей пользователей и приложений. Верхнеуровневое проектирование архитектуры

### Определение ролей пользователей и приложений

- **Сотрудник службы поддержки**: отправляет заявку в OpenShift.
- **Агент-анализатор**: анализирует заявку.
- **Агент-сравниватель**: ищет аналогичные примеры в базе данных "ПКАП".
- **Агент-заполнитель**: заполняет заявку.
- **Агент-валидатор**: проверяет корректность заполнения заявки.
- **Агент-оркестратор**: координирует работу всех агентов.
- **Администратор системы**: получает уведомления о проблемах.
- **Пользователь системы OpenShift**: получает обработанную заявку.

### Верхнеуровневое проектирование архитектуры

Система состоит из следующих компонентов:

- **Агент-анализатор**: анализирует заявки из OpenShift.
- **Агент-сравниватель**: ищет аналогичные примеры в базе данных "ПКАП".
- **Агент-заполнитель**: заполняет заявки на основе анализа и найденных примеров.
- **Агент-валидатор**: проверяет корректность заполнения заявок.
- **Агент-оркестратор**: координирует работу всех агентов, обрабатывает ошибки и альтернативные сценарии.
- **OpenShift**: отправляет и получает заявки.
- **База данных "ПКАП"**: хранит данные о заявках и инцидентах.

## 3. Выделение и описание основных сценариев работы с системой

### Основные сценарии работы с системой

1. **Анализ заявки**
   - **Актор:** Агент-анализатор
   - **Действие:** Анализирует заявку из OpenShift
   - **Объект:** Заявка из OpenShift
   - **Результат:** Выделены причины инцидента и способ его закрытия

2. **Поиск аналогичных примеров**
   - **Актор:** Агент-сравниватель
   - **Действие:** Ищет аналогичные примеры в базе данных "ПКАП"
   - **Объект:** Анализ заявки и база данных "ПКАП"
   - **Результат:** Найдены аналогичные примеры или сообщение об отсутствии аналога

3. **Заполнение заявки**
   - **Актор:** Агент-заполнитель
   - **Действие:** Заполняет заявку
   - **Объект:** Анализ заявки и найденные примеры
   - **Результат:** Заполненная заявка

4. **Проверка корректности заполнения заявки**
   - **Актор:** Агент-валидатор
   - **Действие:** Проверяет корректность заполнения заявки
   - **Объект:** Заполненная заявка
   - **Результат:** Заявка отправлена обратно в OpenShift или возвращена на доработку

5. **Координация работы агентов**
   - **Актор:** Агент-оркестратор
   - **Действие:** Координирует работу всех агентов
   - **Объект:** Все агенты системы
   - **Результат:** Контроль процесса, обработка ошибок и альтернативных сценариев

## 4. Проработка альтернативных сценариев

### Альтернативные сценарии

1. **Если не найдено аналогичного примера**
   - **Актор:** Агент-заполнитель
   - **Действие:** Заполняет заявку на основе только анализа
   - **Объект:** Анализ заявки
   - **Результат:** Заполненная заявка

2. **Если данные из OpenShift некорректны**
   - **Актор:** Агент-анализатор
   - **Действие:** Сообщает агенту-оркестратору
   - **Объект:** Некорректные данные из OpenShift
   - **Результат:** Запрос на повторную передачу данных из OpenShift

3. **Если база данных недоступна**
   - **Актор:** Агент-сравниватель
   - **Действие:** Не может найти аналогичную заявку
   - **Объект:** База данных "ПКАП"
   - **Результат:** Агент-заполнитель заполняет заявку на основе только анализа

4. **Если заполненная заявка некорректна**
   - **Актор:** Агент-валидатор
   - **Действие:** Возвращает задачу агенту-заполнителю на доработку
   - **Объект:** Некорректно заполненная заявка
   - **Результат:** Повторное заполнение заявки

## 5. Требования к безопасности

- **Авторизация/аутентификация:** Использование OAuth и JWT для защиты доступа к системе.
- **Защита данных:** Шифрование данных при передаче и хранении, соответствие требованиям GDPR.

## 6. Описание нефункциональных требований

- **Производительность:** Система должна обрабатывать не менее 100 заявок в минуту.
- **Нагрузочное тестирование:** Проведение нагрузочного тестирования для проверки производительности.
- **Масштабируемость:** Архитектура должна быть масштабируемой для обработки большого количества заявок.

## 7. Определение ключевых данных: сущности и их свойства

### Ключевые данные

- **Заявка**: содержит информацию о заявке, включая описание инцидента, причины и способ закрытия.
- **Пример**: содержит информацию о ранее обработанных заявках, используемых для сравнения.
- **Агент**: содержит информацию о каждом агенте, включая его роль и задачи.

## 8. Задачи на доработку Базы Данных

- **Создание новых таблиц**: создание таблиц для хранения данных о заявках и примерах.
- **Добавление полей в существующие таблицы**: добавление полей для хранения дополнительной информации о заявках.
- **Миграции данных**: перенос и автозаполнение данных из старых систем.

## 9. Задачи на разработку методов Backend (методов API)

### Методы API

- **GET /claims**: получение списка заявок.
- **POST /claims**: создание новой заявки.
- **PUT /claims/{id}**: обновление заявки.
- **DELETE /claims/{id}**: удаление заявки.
- **GET /examples**: получение списка примеров.
- **POST /examples**: создание нового примера.
- **PUT /examples/{id}**: обновление примера.
- **DELETE /examples/{id}**: удаление примера.

## 10. Задачи на фронтенд / мобильные устройства

- **Создание экрана анализа заявки**: отображение информации о заявке и её анализ.
- **Создание экрана поиска примеров**: отображение результатов поиска аналогичных примеров.
- **Создание экрана заполнения заявки**: отображение формы для заполнения заявки.
- **Создание экрана проверки корректности**: отображение результатов проверки корректности заполнения заявки.

## 11. Тестирование функционала

На основании Use Case необходимо описать процесс тестирования функционала, включая:

- **Модульное тестирование**: тестирование отдельных компонентов системы.
- **Интеграционное тестирование**: тестирование взаимодействия между компонентами.
- **Нагрузочное тестирование**: тестирование производительности системы при обработке большого количества заявок.

---

Эти системные требования обеспечивают полное понимание того, как должна работать система, и служат основой для разработки и тестирования.